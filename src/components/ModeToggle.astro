---
/**
 * DO NOT COMMIT YET
 * @TODO find a component library to handle this
 */
const modes = ['light','dark'];
let activeMode = Astro.cookies.get('mode')?.value;
if (modes.indexOf(activeMode as string) === -1) {
    activeMode = modes[0];
}
---
<button data-c="modeToggle" data-mode={activeMode} class:list={[activeMode]}>
    <span class="dark:hidden light:block">‚òÄÔ∏è</span>
    <span class="dark:block light:hidden">üåô</span>
</button>
<script>
    document.addEventListener('click', ({ target }) => {
        const btn = (target as HTMLElement).closest('[data-c="modeToggle"]');
        if (!btn) return;

        btn.classList.toggle('light', !btn.classList.contains('light'));
        btn.classList.toggle('dark', !btn.classList.contains('dark'));
        // Astro.cookies.set('mode',)
    })
</script>