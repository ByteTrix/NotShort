---
import Layout from '../layouts/Layout.astro';
import Header from '../components/Header.astro';
import Section from '../components/Section.astro';
import { getCollection } from 'astro:content';
import ProjectCard from '../components/ProjectCard.astro';
import SectionSpacer from '../components/SectionSpacer.astro';
import StatsGrid from '../components/StatsGrid.astro';
import InvestorGrid from '../components/InvestorGrid.astro';
import LongifyForm from '../components/LongifyForm.astro';
import RecentLinks from '../components/RecentLinks.astro';
// import { getRepoStats, getRepoUrl } from '../lib/github';

const projects = await getCollection('projects');
// const gitStats = await getRepoStats();
---

<Layout title="notshort â€“ A Parody Link Longner">
  <Header gridBg>
    <small class="small text-xs">The only site that makes your links longer, not shorter!</small>
    <h2 class="text-4xl font-mono font-bold mb-2">notshort</h2>
    <p class="subtitle text-base max-w-md mx-auto mt-2 mb-4">Welcome to notshort, the world's best parody of a link shortener. We take your short links and make them as long and ridiculous as possible. Why be short when you can be notshort?</p>
    <div class="mt-6">
      <LongifyForm />
    </div>
  </Header>
  
  <main>
    <!-- Recent Links Section (Real data) -->
    <RecentLinks />
    
    <SectionSpacer size="md" />
    
    <!-- Stats Grid with real statistics -->
    <Section fullWidthBorder={false}>
      <h2 class="text-xl my-10 text-center">Making URLs longer for internet users worldwide. Because sometimes, more is more!</h2>
    </Section>
    <StatsGrid entryName='downloads' />
    
    <SectionSpacer size="md" />
    
    <!-- GitHub Contributors Section -->
    <Section index source="contributors" fullWidthBorder variant="dark">
      <div class="lg:w-[70%] md:w-[80%] mx-auto">
        <h2 class="title mb-8">Our Confused Contributors</h2>
        <p class="subtitle-small mb-8">These brave souls write code that makes URLs longer instead of shorter. They still don't understand the assignment.</p>
<!--         
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
          {gitStats.contributors.map((contributor) => (
            <a href={contributor.url} target="_blank" rel="noopener noreferrer" 
               class="contributor-card flex items-center p-4 border-1 border-gray-700 bg-gray-800 hover:bg-gray-700 transition-colors duration-300 transform hover:scale-[1.02]">
              <img src={contributor.avatar} alt={contributor.name} class="w-12 h-12 rounded-full mr-4" />
              <div>
                <h3 class="font-mono text-gray-100">{contributor.name}</h3>
                <p class="text-xs text-gray-400">GitHub Contributor</p>
              </div>
            </a>
          ))} 
        </div> -->
        
        <div class="text-center mt-8">
          <!-- <a href={getRepoUrl()} target="_blank" rel="noopener noreferrer"  -->
             class="inline-block longify-btn relative overflow-hidden fw-bold bg-gray-900 hover:bg-gray-800 c-gray-100 text-5 text-center py-4 px-8 transition-all duration-300 transform hover:scale-[1.02]">
            <span class="relative z-10">View All Contributors</span>
            <span class="btn-bg absolute inset-0 w-full h-full transform scale-x-0 origin-left transition-transform duration-500"></span>
          </a>
        </div>
      </div>
    </Section>
    
    <SectionSpacer size="md" />
    
    <!-- Investors Section -->
    <Section index source="investors.md" fullWidthBorder>
      <div class="pb-12.5">
        <h2 class="title">Our Confused Supporters</h2>
        <p class="subtitle-small md:w-[50%]">These brave souls support our mission to make the internet less efficient. They couldn't figure out how to withdraw their funding.</p>
      </div>
      <InvestorGrid />
    </Section>
    
    <SectionSpacer />
    
    <!-- Repository Section -->
    <Section index source="Component.framework" fullWidthBorder variantInside="dark">
      <div class="grid lg:grid-cols-[4fr_1fr] place-items-center gap-5">
        <h2 class="text-pretty title text-8 leading-8 font-bold c-gray-800 dark:c-gray-100">Want to contribute to the URL longification revolution?<br/><span class="c-gray-500 dark:c-gray-300 text-[0.9em]">Check out our unnecessarily complicated GitHub repository.</span></h2>
        <div>
          <!-- <a href={getRepoUrl()} target="_blank" rel="noopener noreferrer"  -->
             class="longify-btn relative overflow-hidden block fw-bold bg-gray-800 hover:bg-gray-700 c-gray-100 text-5 text-center py-4 px-7 transition-all duration-300 transform hover:scale-[1.02]">
            <span class="relative z-10">Visit Repo</span>
            <span class="btn-bg absolute inset-0 w-full h-full transform scale-x-0 origin-left transition-transform duration-500"></span>
          </a>
        </div>
      </div>
    </Section>
    
    <SectionSpacer />
    
    <!-- Why Choose NotShort Section -->
    <Section variant="dark" index source="statement.md" fullWidthBorder>
      <div class="lg:w-[60%] md:w-[70%] mx-auto">
        <h2 class="title">Why Choose notshort?</h2>
        <p class="subtitle-small">We're committed to making the internet worse, one URL at a time. Our longification technology is state-of-the-art.</p>
        <ul class="flex flex-col gap-row-3 mt-3 subtitle-small">
          <li><strong class="text-[1.2em]">Complexity:</strong> We add unnecessary parameters and path segments to every URL.</li>
          <li><strong class="text-[1.2em]">Inefficiency:</strong> We guarantee at least 500% increase in character count.</li>
          <li><strong class="text-[1.2em]">Confusion:</strong> Your recipients won't know what hit them when they see your URLs.</li>
          <li><strong class="text-[1.2em]">Anti-Productivity:</strong> Waste time with our service that actively makes sharing links harder.</li>
        </ul>
      </div>
    </Section>
  </main>
</Layout>

<style>
  .btn-bg {
    background: linear-gradient(90deg, #3B82F6 0%, #8B5CF6 100%);
  }
  
  .longify-btn:hover .btn-bg {
    transform: scale-x-100;
  }
  
  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }
  
  .contributor-card {
    animation: fadeIn 0.5s ease forwards;
    opacity: 0;
  }
  
  .contributor-card:nth-child(1) { animation-delay: 0.1s; }
  .contributor-card:nth-child(2) { animation-delay: 0.2s; }
  .contributor-card:nth-child(3) { animation-delay: 0.3s; }
  .contributor-card:nth-child(4) { animation-delay: 0.4s; }
  .contributor-card:nth-child(5) { animation-delay: 0.5s; }
</style>
